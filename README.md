# BizCore ä¼ä¸šè€ƒå‹¤ä¸äººäº‹ç®¡ç†å¹³å°

![JDK](https://img.shields.io/badge/JDK-17%2B-007396?logo=openjdk&logoColor=white)
![Node](https://img.shields.io/badge/Node.js-18%2B-339933?logo=node.js&logoColor=white)
![npm](https://img.shields.io/badge/npm-9%2B-CB3837?logo=npm&logoColor=white)
![MySQL](https://img.shields.io/badge/MySQL-8.0%2B-4479A1?logo=mysql&logoColor=white)
![Gradle](https://img.shields.io/badge/Gradle-Wrapper-02303A?logo=gradle&logoColor=white)

BizCore æ˜¯ä¸€ä¸ªå›´ç»•ã€Œä¼ä¸šè€ƒå‹¤ã€è¯·å‡ã€åŠ ç­ä¸éƒ¨é—¨ç®¡ç†ã€çš„å…¨æ ˆç¤ºä¾‹é¡¹ç›®ã€‚åç«¯åŸºäº Spring Boot 3 + Spring Security ä¿æŠ¤çš„ REST APIï¼Œå‰ç«¯ä½¿ç”¨ Vue 3ï¼ˆViteï¼‰ä¸ Ant Design Vue æ„å»ºã€‚é¡¹ç›®å†…ç½®å¤šè§’è‰²æƒé™æ¨¡å‹ã€JWT é‰´æƒï¼ˆæ”¯æŒå¤šè®¾å¤‡ Sessionï¼‰ã€å®Œæ•´çš„è€ƒå‹¤ä¸šåŠ¡æµç¨‹ä»¥åŠ MySQL æ•°æ®åˆå§‹åŒ–è„šæœ¬ï¼Œé€‚åˆäºŒæ¬¡å¼€å‘æˆ–å­¦ä¹ å‚è€ƒã€‚

---

## âœ¨ åŠŸèƒ½æ€»è§ˆ

| æ¨¡å— | è§’è‰² | ä¸»è¦èƒ½åŠ› |
| ---- | ---- | -------- |
| ç”¨æˆ·è®¤è¯ | å…¨ä½“ | è´¦å·æ³¨å†Œ / ç™»å½•ã€å¿˜è®°å¯†ç ï¼ˆå¯†ä¿ + æ‰‹æœºæ ¡éªŒï¼‰ã€JWT å¤šè®¾å¤‡ç™»å½•ã€åˆ·æ–° / ç™»å‡º |
| å‘˜å·¥ç®¡ç† | ç®¡ç†å‘˜ã€ç»ç† | å‘˜å·¥åˆ—è¡¨ã€ä¿¡æ¯ç»´æŠ¤ã€è´¦å·æ³¨å†Œã€å¯†ç é‡ç½®ã€è§’è‰²åŒæ­¥ |
| éƒ¨é—¨ç®¡ç† | ç®¡ç†å‘˜ | éƒ¨é—¨ CRUDã€ç»ç†æŒ‡å®šã€éƒ¨é—¨ç»Ÿè®¡ |
| è€ƒå‹¤ | å‘˜å·¥ã€ç»ç† | ç­¾åˆ° / ç­¾é€€ã€è¿Ÿåˆ°æ—©é€€åˆ¤å®šã€éƒ¨é—¨è€ƒå‹¤æŸ¥çœ‹ã€è€ƒå‹¤ç»Ÿè®¡ |
| è€ƒå‹¤è§„åˆ™ | ç»ç† | ä¸Šä¸‹ç­æ—¶é—´ã€å®½é™æ—¶é—´ã€å¼¹æ€§å·¥ä½œåˆ¶é…ç½® |
| è¯·å‡ä¸åŠ ç­ | å‘˜å·¥ã€ç»ç† | ç”³è¯·ã€å®¡æ‰¹ã€è®°å½•æŸ¥è¯¢ |

åç«¯ `/auth/refresh`ã€`/auth/logout`ã€`/users/reset-password` ç­‰æ¥å£æ”¯æŒåŒ¿åè®¿é—®ï¼Œä»¥é…åˆå‰ç«¯æ‰¾å›å¯†ç æµç¨‹ï¼Œå…¶ä½™ä¸šåŠ¡æ¥å£å‡éœ€ç™»å½•ç”¨æˆ·å‡­è¯ã€‚

---

##  é¡¹ç›®ç»“æ„

```
BizCore
â”œâ”€â”€ backend                  # Spring Boot æœåŠ¡
â”‚   â”œâ”€â”€ build.gradle         # Gradle å­æ¨¡å—é…ç½®
â”‚   â”œâ”€â”€ src/main/java/com/achieveil/bizcore
â”‚   â”‚   â”œâ”€â”€ config           # å®‰å…¨ & CORS & JWT é…ç½®
â”‚   â”‚   â”œâ”€â”€ controller       # REST æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ dto              # è¯·æ±‚ / å“åº”æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ entity           # JPA å®ä½“
â”‚   â”‚   â”œâ”€â”€ filter           # JWT è¿‡æ»¤å™¨
â”‚   â”‚   â”œâ”€â”€ repository       # Spring Data ä»“å‚¨
â”‚   â”‚   â””â”€â”€ service          # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â””â”€â”€ src/main/resources
â”‚       â””â”€â”€ db/schema.sql    # MySQL åˆå§‹åŒ–è„šæœ¬ï¼ˆåŒ…å«ç¤ºä¾‹æ•°æ®ï¼‰
â”œâ”€â”€ frontend                 # Vue 3 + Vite å‰ç«¯
â”‚   â””â”€â”€ src
â”‚       â”œâ”€â”€ api              # Axios è¯·æ±‚å°è£…
â”‚       â”œâ”€â”€ views            # é¡µé¢ç»„ä»¶
â”‚       â””â”€â”€ router           # å‰ç«¯è·¯ç”±è¡¨
â””â”€â”€ README.md                # å½“å‰æ–‡æ¡£
```

---

##  ç¯å¢ƒå‡†å¤‡

| ç»„ä»¶ | ç‰ˆæœ¬å»ºè®® |
| ---- | -------- |
| JDK  | 17 |
| Node | â‰¥ 18ï¼ˆå»ºè®® 18.xï¼‰ |
| MySQL| â‰¥ 8.0 |
| æ„å»ºå·¥å…· | Gradle Wrapperï¼ˆé¡¹ç›®å·²è‡ªå¸¦ï¼‰ |

è‹¥éœ€è¿è¡Œ `schema.sql`ï¼Œè¯·ç¡®ä¿ MySQL ä»¥ UTF8MB4 å­—ç¬¦é›†è¿è¡Œï¼Œå¹¶ä¸”æœ‰æƒé™æ‰§è¡Œ `DROP DATABASE`.

---

##  æ•°æ®åº“åˆå§‹åŒ–

1. å¯åŠ¨æœ¬åœ° MySQL æœåŠ¡ã€‚
2. ç›´æ¥æ‰§è¡Œ `backend/src/main/resources/db/schema.sql`ï¼ˆä¼š **åˆ é™¤å¹¶é‡å»º** `bizcore` æ•°æ®åº“ï¼‰ï¼š

   ```sql
   SOURCE /path/to/BizCore/backend/src/main/resources/db/schema.sql;
   ```

   - è„šæœ¬ä¼šåˆ›å»ºæ‰€æœ‰ä¸šåŠ¡è¡¨ï¼ˆå« `user_sessions` ç­‰ JWT ç›¸å…³è¡¨ï¼‰ã€‚
   - è‡ªåŠ¨æ’å…¥éƒ¨é—¨ã€å‘˜å·¥ã€ç»ç†åŠç®¡ç†å‘˜ç¤ºä¾‹è´¦å·ã€‚

3. é»˜è®¤æ•°æ®åº“è¿æ¥ä¿¡æ¯ï¼ˆå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è¦†ç›–ï¼‰ï¼š

   | å±æ€§ | é»˜è®¤å€¼ |
   | ---- | ------ |
   | `SPRING_DATASOURCE_URL` | `jdbc:mysql://localhost:3306/bizcore?...` |
   | `SPRING_DATASOURCE_USERNAME` | `root` |
   | `SPRING_DATASOURCE_PASSWORD` | `12345678` |
   | `SECURITY_JWT_SECRET` | `BizCoreChangeMeSecretKeyBizCoreChangeMeSecretKey`ï¼ˆå»ºè®®éƒ¨ç½²æ—¶ä¿®æ”¹ï¼‰ |

### ç¤ºä¾‹è´¦æˆ·ï¼ˆå¯†ç å‡ä¸º `Passw0rd!`ï¼Œå®‰å…¨é—®é¢˜ç­”æ¡ˆä¸ºâ€œè“è‰²â€ï¼‰

| è§’è‰² | ç”¨æˆ·å | è¯´æ˜ |
| ---- | ------ | ---- |
| ç®¡ç†å‘˜ | `admin` | å…¨å±€ç®¡ç† |
| éƒ¨é—¨ç»ç† | `li.manager`ï¼ˆäººåŠ›ï¼‰ / `zhang.finance`ï¼ˆè´¢åŠ¡ï¼‰ / `wang.sales`ï¼ˆé”€å”®ï¼‰ / `chen.tech`ï¼ˆç ”å‘ï¼‰ / `liu.ops`ï¼ˆè¿è¥ï¼‰ | å·²å…³è”å¯¹åº”éƒ¨é—¨ |
| éƒ¨é—¨å‘˜å·¥ | `zhao.hr` / `sun.hr` ... `zhao.op` / `sun.op` | æ¯ä¸ªéƒ¨é—¨ 2 åå‘˜å·¥ï¼Œå·¥å· `E00x0y` |

---

## ğŸ› ï¸ åç«¯è¿è¡Œ

```bash
cd backend
./gradlew bootRun
```

> è¿è¡Œå‰ç¡®ä¿ `application.yml` ä¸­çš„æ•°æ®åº“é…ç½®æŒ‡å‘æœ‰æ•ˆ MySQL å®ä¾‹ã€‚  
> ä½¿ç”¨ `./gradlew :backend:test` å¯æ‰§è¡Œå•å…ƒæµ‹è¯•ã€‚

### æ ¸å¿ƒåç«¯ç‰¹æ€§

- **Spring Security + JWT**ï¼šç™»å½•æˆåŠŸåè¿”å› accessTokenï¼ˆ1 å°æ—¶ï¼‰ä¸ refreshTokenï¼ˆ7 å¤©ï¼‰ï¼Œæ”¯æŒå¤šè®¾å¤‡åŒæ—¶ç™»å½•ï¼Œåå°å¯åŠé”€æŒ‡å®š sessionã€‚
- **è§’è‰²æƒé™**ï¼š`ADMIN`ã€`MANAGER`ã€`EMPLOYEE` ä¸‰ç§è§’è‰²é€šè¿‡ JWT è½½è·æ³¨å…¥ `ROLE_*` æƒé™ã€‚
- **REST æ¥å£**ï¼š
  - `/auth/login | refresh | logout` â€”â€” è®¤è¯ä¸ Token è½®æ¢
  - `/users/*` â€”â€” ç”¨æˆ·æ³¨å†Œã€æ‰¾å›å¯†ç ã€ç®¡ç†å‘˜é‡ç½®
  - `/employees/*` â€”â€” å‘˜å·¥ CRUDã€è´¦å·å…³è”ã€è§’è‰²è°ƒæ•´
  - `/departments/*`ã€`/department-managers/*` â€”â€” éƒ¨é—¨ä¸ç»ç†é…ç½®
  - `/attendances/*` â€”â€” è€ƒå‹¤è®°å½•ã€ç»Ÿè®¡
  - `/leave-requests/*`ã€`/overtime-requests/*` â€”â€” è¯·å‡ä¸åŠ ç­æµç¨‹
  - `/department-attendance-rules/*` â€”â€” éƒ¨é—¨è€ƒå‹¤è§„åˆ™

æ‰€æœ‰æ¥å£è¿”å›ç»Ÿä¸€çš„ `Result<T>` å“åº”ç»“æ„ï¼ˆ`code`ã€`message`ã€`data`ï¼‰ã€‚

---

##  å‰ç«¯è¿è¡Œ

```bash
cd frontend
npm install
npm run dev
```

é»˜è®¤ Vite æœåŠ¡è¿è¡Œåœ¨ `http://localhost:5173`ï¼Œå¹¶é€šè¿‡ `frontend/src/api/request.js` ä¸­çš„ `baseURL = http://localhost:8080/api` è°ƒç”¨åç«¯æ¥å£ã€‚

### å‰ç«¯æ³¨æ„äº‹é¡¹

- æ‰¾å›å¯†ç æµç¨‹åŒ…å« 5 ä¸ªæ­¥éª¤ï¼ˆç”¨æˆ·å â†’ å¯†ä¿ â†’ æ‰‹æœºéªŒè¯ â†’ æ–°å¯†ç  â†’ å®Œæˆï¼‰ï¼Œå¯†ç æ ¡éªŒè§„åˆ™ï¼š**6-20 ä½ï¼Œè‡³å°‘åŒ…å«å¤§å°å†™å­—æ¯ä¸æ•°å­—ï¼Œå¯åŒ…å«å¸¸è§ç‰¹æ®Šç¬¦å·**ã€‚
- ç™»å½•æˆåŠŸåä¼šåœ¨ `localStorage` ä¸­ä¿å­˜ `token`ã€`refreshToken`ã€`sessionId` ä»¥åŠç”¨æˆ·ä¿¡æ¯ï¼ŒAxios æ‹¦æˆªå™¨è‡ªåŠ¨æ³¨å…¥ `Authorization` å¤´ã€‚
- é¡µé¢å…¥å£ï¼š
  - `/login` â€”â€” ç™»å½•
  - `/forgot-password` â€”â€” æ‰¾å›å¯†ç 
  - `/dashboard` â€”â€” ç™»å½•åå·¥ä½œå°ï¼ˆæ ¹æ®è§’è‰²å±•ç¤ºä¸åŒèœå•ï¼‰

---

##  å¯†ç ç­–ç•¥

- åç«¯å¯†ç åŠ å¯†ä½¿ç”¨ BCryptï¼›æ‰€æœ‰ç¤ºä¾‹è´¦å·é»˜è®¤å¯†ç  `Passw0rd!`ï¼ˆæ»¡è¶³å¤§å°å†™ã€æ•°å­—ã€ç‰¹æ®Šç¬¦å·ï¼‰ã€‚
- å‰ç«¯æ ¡éªŒï¼š`/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d!@#$%^&*()_+\-={}\[\]:";'<>?,.\/]{6,20}$/`
- å¿˜è®°å¯†ç ä¸ç®¡ç†å‘˜é‡ç½®é¡µåŒæ­¥ä½¿ç”¨ä¸Šè¿°è§„åˆ™ã€‚

---

##  å¸¸ç”¨å‘½ä»¤é€Ÿè§ˆ

| å‘½ä»¤ | è¯´æ˜ |
| ---- | ---- |
| `./gradlew :backend:test` | æ‰§è¡Œåç«¯æµ‹è¯• |
| `./gradlew bootRun` | å¯åŠ¨åç«¯ |
| `npm run dev`ï¼ˆfrontendï¼‰ | å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ |
| `npm run build`ï¼ˆfrontendï¼‰ | ç”Ÿäº§æ„å»º |
| `mysql < schema.sql` | åˆå§‹åŒ–æ•°æ®åº“æ•°æ® |

---

##  å¼€å‘æç¤º

- å¦‚éœ€ç¦ç”¨ç¤ºä¾‹æ•°æ®ï¼Œå¯ä¿®æ”¹æˆ–æ³¨é‡Š `schema.sql` ä¸­çš„æ’å…¥æ®µè½ï¼Œæˆ–è‡ªè¡Œç»´æŠ¤è¿ç§»è„šæœ¬ã€‚
- éƒ¨ç½²ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œè¯·è®¾ç½®å®‰å…¨çš„ `SECURITY_JWT_SECRET`ã€æ•°æ®åº“è´¦å·ã€è·¨åŸŸç­–ç•¥ç­‰ã€‚
- å‰ç«¯é»˜è®¤å¼€å¯ç²’å­èƒŒæ™¯æ¸²æŸ“ï¼Œå¦‚åœ¨ä½æ€§èƒ½ç¯å¢ƒå¯åœ¨ `ForgotPassword.vue` / `Login.vue` ä¸­ç§»é™¤ç›¸å…³ä»£ç ã€‚

---

##  è®¸å¯

æœ¬é¡¹ç›®ç”¨äºå­¦ä¹ ä¸ç¤ºä¾‹ï¼Œå¯è‡ªç”±ä¿®æ”¹ã€‚è‹¥å°†å…¶ç”¨äºå•†ä¸šç”¨é€”ï¼Œè¯·è‡ªè¡Œå®Œå–„å®‰å…¨ä¸å®¡è®¡æªæ–½ã€‚

---

å¦‚éœ€é—®é¢˜åé¦ˆæˆ–æ”¹è¿›å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue / PRã€‚ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
